# Cross-Origin-Isolation Headers für WebContainer
# Diese Header sind erforderlich, damit WebContainer SharedArrayBuffer verwenden kann

<IfModule mod_headers.c>
    # Cross-Origin-Embedder-Policy (COEP)
    Header always set Cross-Origin-Embedder-Policy "require-corp"
    
    # Cross-Origin-Opener-Policy (COOP) 
    Header always set Cross-Origin-Opener-Policy "same-origin"
    
    # Cross-Origin-Resource-Policy für JavaScript und andere Ressourcen
    <FilesMatch "\.(js|mjs|css|woff|woff2|ttf|png|jpg|jpeg|gif|svg)$">
        Header always set Cross-Origin-Resource-Policy "cross-origin"
    </FilesMatch>
    
    # Für das Build-Verzeichnis
    <Directory "build">
        Header always set Cross-Origin-Resource-Policy "cross-origin"
        Header always set Cross-Origin-Embedder-Policy "require-corp"
        Header always set Cross-Origin-Opener-Policy "same-origin"
    </Directory>
</IfModule>

# Fallback ohne mod_headers - versuche mit anderen Methoden
<IfModule !mod_headers.c>
    # Wenn mod_headers nicht verfügbar ist, dokumentiere die benötigten Header
    # Die Header werden dann über PHP gesetzt (siehe view.php)
</IfModule>

# Alternative für nginx (falls Apache mod_headers nicht verfügbar)
# add_header Cross-Origin-Embedder-Policy "require-corp";
# add_header Cross-Origin-Opener-Policy "same-origin";
